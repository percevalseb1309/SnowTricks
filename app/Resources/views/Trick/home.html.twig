{% extends "layout.html.twig" %}

{% block title %}
  Home - {{ parent() }}
{% endblock %}

{% block body %}
	<h1>Home page</h1>

	{% for row in listTricks|batch(4) %}
		<div class="row">
		{% for trick in row %}
			<div class="col-md-3">
			  	<div class="thumbnail">
			    	<a href="{{ path('trick_show', {'slug': trick.slug}) }}">
			    		{% if trick.pictures is not empty %}
				      		<img src="{{ asset(trick.pictures|first.webPath) }}" alt="{{ trick.pictures|first.alt }}" style="width:100%">
				      	{% else %}
				      		<img src="{{ asset('uploads/pictures/default.jpeg') }}" alt="Image par dÃ©faut" style="width:100%">
			    		{% endif %}
			    	</a>
			      	<div class="caption">
			        	<a href="{{ path('trick_show', {'slug': trick.slug}) }}">{{ trick.name }}</a>
			        	{% if is_granted('ROLE_AUTHOR') %}
			        	<div class="pull-right">
				        	<a href="{{ path('trick_edit', {'slug': trick.slug}) }}"><span class="glyphicon glyphicon-edit"></span></a>
				        	<a class="delete-trick" data-name="{{ trick.name }}" href="{{ path('trick_delete', {'slug': trick.slug}) }}"><span class="glyphicon glyphicon-trash"></span></a>
			        	</div>
			        	{% endif %}
			      	</div>
			  	</div>
			</div>
		{% endfor %}
		</div>
	{% endfor %}

	<div class="row text-center">	
		<ul class="pagination pagination-lg">
		  	{% for p in range(1, nbPages) %}
		    	<li{% if p == page %} class="active"{% endif %}>
		      		<a href="{{ path('trick_list', {'page': p}) }}">{{ p }}</a>
		    	</li>
		  	{% endfor %}
		</ul>
	</div>

	{{ include("Trick/delete.html.twig") }}
{% endblock %}